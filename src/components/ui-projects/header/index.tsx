import React, { useState } from 'react';
import Link from 'next/link';
import styles from './index.module.scss';
import Image from 'next/image';
import classnames from 'classnames';
import { TagList } from '../tag-list';
import { CategoryList } from '../category-list';

export interface HeaderProps {
  categories?: any,
  tags?: any
}

export const Header: React.FC<HeaderProps> = ({
  categories,
  tags
}) => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const handleMenuButtonClick = () => {
    setIsMenuOpen(!isMenuOpen);
  };
  const handleOverlayClick = () => {
    setIsMenuOpen(false);
  };

  const logoFillColor = isMenuOpen ? 'white' : 'black';
  const logoFillColor2 = isMenuOpen ? 'white' : '#1A1A1A';

  const [activeButton, setActiveButton] = useState('category');
  function handleClick(event: React.MouseEvent<HTMLButtonElement>) {
    const buttonDataToggle = event.currentTarget.getAttribute('data-toggle');
    setActiveButton(buttonDataToggle);
  };

  return (
    <>
      <header className={classnames(styles.header, isMenuOpen ? styles.isOpen : '')}>
        <Link href={`/`} scroll={false} className={styles.home}>
          <svg width="526" height="51" viewBox="0 0 526 51" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M387.445 1.797L387.851 10.4673H386.815C386.612 8.94439 386.338 7.84791 385.993 7.19815C385.435 6.14229 384.683 5.37069 383.739 4.86307C382.805 4.36559 381.577 4.11178 380.044 4.11178H374.835V32.3562C374.835 34.6303 375.079 36.0415 375.576 36.6101C376.267 37.3715 377.333 37.7573 378.764 37.7573H380.044V38.7624H364.368V37.7573H365.678C367.241 37.7573 368.348 37.2801 369.008 36.336C369.404 35.7573 369.607 34.4273 369.607 32.3562V4.12193H365.16C363.434 4.12193 362.206 4.25391 361.485 4.50773C360.541 4.85291 359.728 5.51283 359.058 6.49763C358.388 7.48242 357.982 8.80225 357.86 10.4774H356.825L357.261 1.80715H387.445V1.797Z" fill={logoFillColor} />
            <path d="M404.003 13.0562V33.1278C404.003 34.6912 404.115 35.7268 404.349 36.2446C404.572 36.7624 404.907 37.1482 405.354 37.402C405.8 37.6558 406.613 37.7878 407.79 37.7878V38.7726H395.658V37.7878C396.876 37.7878 397.689 37.6659 398.115 37.4324C398.531 37.1989 398.866 36.803 399.11 36.2649C399.354 35.7167 399.475 34.6709 399.475 33.1278V23.5031C399.475 20.7924 399.394 19.036 399.232 18.2441C399.1 17.6654 398.907 17.2593 398.633 17.036C398.359 16.8126 397.993 16.6908 397.516 16.6908C397.008 16.6908 396.389 16.8228 395.658 17.0969L395.272 16.1121L402.795 13.0562H403.993H404.003Z" fill={logoFillColor} />
            <path d="M414.43 16.2745L422.116 13.1678H423.151V19.0056C424.441 16.8025 425.74 15.2694 427.04 14.3861C428.339 13.5029 429.71 13.0663 431.141 13.0663C433.649 13.0663 435.74 14.0511 437.416 16.0106C439.466 18.4066 440.492 21.5335 440.492 25.3915C440.492 29.6962 439.253 33.2597 436.786 36.0821C434.756 38.3868 432.187 39.5442 429.101 39.5442C427.75 39.5442 426.593 39.3513 425.608 38.9756C424.877 38.7015 424.065 38.1533 423.151 37.3411V44.9453C423.151 46.6509 423.253 47.7373 423.466 48.2043C423.679 48.6713 424.035 49.0368 424.552 49.3109C425.07 49.585 426.014 49.717 427.375 49.717V50.7221H414.288V49.717H414.968C415.963 49.7373 416.826 49.5444 417.527 49.1485C417.872 48.9454 418.136 48.6307 418.329 48.184C418.522 47.7373 418.613 46.6103 418.613 44.793V21.1782C418.613 19.5639 418.542 18.5385 418.4 18.102C418.258 17.6654 418.024 17.3405 417.709 17.1172C417.395 16.904 416.958 16.7923 416.41 16.7923C415.973 16.7923 415.415 16.9243 414.745 17.1781L414.42 16.305L414.43 16.2745ZM423.161 20.6097V29.9297C423.161 31.9501 423.243 33.2699 423.405 33.9095C423.659 34.9654 424.278 35.8892 425.273 36.6913C426.268 37.4933 427.517 37.8893 429.019 37.8893C430.837 37.8893 432.309 37.1786 433.436 35.7674C434.908 33.9095 435.649 31.3003 435.649 27.9398C435.649 24.1224 434.817 21.1884 433.141 19.1375C431.974 17.7162 430.593 17.0157 428.999 17.0157C428.126 17.0157 427.263 17.2289 426.41 17.6654C425.76 17.9903 424.674 18.9751 423.161 20.6097Z" fill={logoFillColor} />
            <path d="M461.132 13.0562V21.564H460.228C459.538 18.8939 458.655 17.0766 457.569 16.1121C456.482 15.1476 455.112 14.6704 453.436 14.6704C452.167 14.6704 451.142 15.0054 450.36 15.6755C449.578 16.3456 449.183 17.0969 449.183 17.9091C449.183 18.9243 449.477 19.7974 450.056 20.5284C450.614 21.2696 451.761 22.0615 453.487 22.9041L457.467 24.8433C461.152 26.6403 463 29.016 463 31.9602C463 34.2344 462.137 36.0618 460.421 37.4527C458.706 38.8436 456.787 39.534 454.655 39.534C453.132 39.534 451.386 39.2599 449.416 38.7116C448.817 38.5289 448.33 38.4375 447.944 38.4375C447.528 38.4375 447.203 38.671 446.959 39.1482H446.056V30.2343H446.959C447.467 32.7826 448.441 34.7014 449.873 35.9908C451.304 37.2801 452.919 37.9299 454.695 37.9299C455.944 37.9299 456.97 37.5644 457.761 36.8233C458.553 36.0821 458.949 35.1989 458.949 34.1633C458.949 32.9044 458.513 31.8587 457.629 30.9957C456.746 30.1429 454.99 29.0566 452.35 27.7469C449.71 26.4372 447.985 25.2595 447.172 24.2037C446.35 23.1681 445.944 21.8584 445.944 20.2746C445.944 18.2238 446.644 16.508 448.056 15.1171C449.467 13.7364 451.284 13.046 453.518 13.046C454.502 13.046 455.69 13.2592 457.091 13.6755C458.015 13.9496 458.635 14.0816 458.949 14.0816C459.244 14.0816 459.467 14.0206 459.629 13.8887C459.792 13.7668 459.985 13.4826 460.198 13.046H461.102L461.132 13.0562Z" fill={logoFillColor} />
            <path d="M85.1224 1.797V14.5892H84.1173C83.7924 12.1323 83.2036 10.183 82.3609 8.73119C81.5182 7.27937 80.3101 6.12198 78.7466 5.26917C77.1831 4.41635 75.5688 3.98995 73.8937 3.98995C72.0053 3.98995 70.4418 4.56864 69.2032 5.72603C67.9646 6.88342 67.3453 8.1931 67.3453 9.66522C67.3453 10.7922 67.7412 11.8176 68.523 12.7414C69.6499 14.1019 72.3302 15.9192 76.5638 18.1934C80.0157 20.0513 82.371 21.4726 83.6401 22.4574C84.899 23.4524 85.8737 24.6199 86.5539 25.9601C87.2341 27.3103 87.5793 28.7114 87.5793 30.1835C87.5793 32.9856 86.493 35.3918 84.3203 37.4223C82.1477 39.4528 79.3557 40.4579 75.9343 40.4579C74.8582 40.4579 73.8531 40.3767 72.9089 40.2142C72.3505 40.1229 71.1728 39.7878 69.4063 39.2193C67.6296 38.6507 66.5128 38.3563 66.0356 38.3563C65.5584 38.3563 65.2234 38.4883 64.9594 38.7624C64.6955 39.0365 64.5026 39.5949 64.3706 40.4579H63.3655V27.7774H64.3706C64.8478 30.4272 65.4772 32.4171 66.2793 33.7369C67.0813 35.0567 68.2996 36.1532 69.9443 37.0263C71.589 37.8994 73.3962 38.336 75.3556 38.336C77.6298 38.336 79.4167 37.737 80.7365 36.539C82.0563 35.341 82.7162 33.9196 82.7162 32.2851C82.7162 31.3714 82.4624 30.4576 81.9649 29.5338C81.4675 28.6099 80.6857 27.7469 79.6299 26.9449C78.9192 26.3966 76.9902 25.2392 73.8226 23.4727C70.655 21.696 68.4113 20.2848 67.0712 19.2289C65.731 18.1731 64.7259 17.0157 64.0356 15.7364C63.3452 14.4674 63 13.0663 63 11.5333C63 8.88347 64.0153 6.589 66.0559 4.68032C68.0864 2.76149 70.6855 1.80715 73.8226 1.80715C75.782 1.80715 77.8633 2.28432 80.0664 3.24881C81.0817 3.70568 81.8025 3.92903 82.2188 3.92903C82.6858 3.92903 83.0817 3.7869 83.3761 3.50262C83.6807 3.21835 83.9142 2.64981 84.097 1.797H85.1021H85.1224Z" fill={logoFillColor} />
            <path d="M121.245 3.65491V2.64981H134.331V3.65491H132.941C131.489 3.65491 130.372 4.26406 129.59 5.48237C129.204 6.05091 129.022 7.35044 129.022 9.4114V24.4067C129.022 28.1124 128.656 30.9957 127.915 33.0364C127.184 35.077 125.732 36.8334 123.58 38.2954C121.428 39.7574 118.494 40.4883 114.788 40.4883C110.757 40.4883 107.691 39.7878 105.6 38.3868C103.508 36.9857 102.026 35.1075 101.153 32.7419C100.574 31.1277 100.28 28.0921 100.28 23.6351V9.18805C100.28 6.91388 99.9651 5.42145 99.3357 4.72093C98.7062 4.01025 97.691 3.65491 96.3001 3.65491H94.9092V2.64981H110.889V3.65491H109.468C107.945 3.65491 106.849 4.13208 106.199 5.09657C105.742 5.74633 105.519 7.11693 105.519 9.18805V25.3001C105.519 26.7316 105.651 28.3764 105.915 30.2343C106.178 32.0922 106.656 33.5338 107.346 34.5694C108.036 35.605 109.031 36.4578 110.331 37.1278C111.63 37.7979 113.224 38.1329 115.113 38.1329C117.529 38.1329 119.692 37.605 121.6 36.5491C123.509 35.4933 124.808 34.143 125.509 32.4983C126.209 30.8536 126.555 28.0718 126.555 24.1427V9.17789C126.555 6.87327 126.301 5.42145 125.793 4.84276C125.083 4.04071 124.027 3.64476 122.626 3.64476H121.235L121.245 3.65491Z" fill={logoFillColor} />
            <path d="M224.344 22.3051V33.077C224.344 35.4019 224.598 36.8537 225.106 37.4121C225.796 38.2142 226.842 38.6101 228.243 38.6101H229.664V39.6152H213.826V38.6101H215.217C216.781 38.6101 217.897 38.1025 218.567 37.0872C218.933 36.5288 219.116 35.1887 219.116 33.077V9.18805C219.116 6.86311 218.872 5.42145 218.385 4.85291C217.674 4.05086 216.618 3.65491 215.217 3.65491H213.826V2.64981H227.38C230.69 2.64981 233.299 2.99499 235.207 3.67521C237.116 4.35543 238.72 5.50267 240.03 7.12708C241.34 8.74133 241.989 10.6602 241.989 12.8836C241.989 15.8989 240.994 18.3558 239.004 20.2442C237.015 22.1325 234.202 23.0767 230.568 23.0767C229.674 23.0767 228.71 23.0158 227.674 22.8838C226.639 22.762 225.532 22.5691 224.344 22.3153V22.3051ZM224.344 20.7518C225.309 20.9345 226.161 21.0665 226.903 21.1579C227.644 21.2493 228.283 21.2899 228.811 21.2899C230.7 21.2899 232.334 20.5589 233.705 19.0969C235.075 17.635 235.766 15.7364 235.766 13.4115C235.766 11.8074 235.441 10.3251 234.781 8.95454C234.131 7.58394 233.197 6.55854 231.999 5.87832C230.801 5.1981 229.431 4.85291 227.908 4.85291C226.984 4.85291 225.796 5.0255 224.334 5.37069V20.7518H224.344Z" fill={logoFillColor} />
            <path d="M280.203 29.3916L281.107 29.5845L277.939 39.6152H249.309V38.6101H250.7C252.264 38.6101 253.38 38.1025 254.05 37.0872C254.436 36.5085 254.619 35.1583 254.619 33.0567V9.18805C254.619 6.88342 254.365 5.4316 253.858 4.85291C253.147 4.05086 252.091 3.65491 250.69 3.65491H249.299V2.64981H266.041V3.65491C264.081 3.6346 262.7 3.81735 261.909 4.20315C261.117 4.58894 260.579 5.06611 260.284 5.64481C259.99 6.2235 259.848 7.6144 259.848 9.8175V33.0465C259.848 34.5593 259.99 35.5948 260.284 36.1532C260.497 36.539 260.843 36.8131 261.289 36.9959C261.746 37.1786 263.157 37.27 265.543 37.27H268.244C271.076 37.27 273.066 37.0568 274.213 36.6405C275.361 36.2243 276.406 35.4831 277.351 34.4171C278.295 33.3511 279.239 31.6759 280.183 29.3916H280.203Z" fill={logoFillColor} />
            <path d="M312.702 27.2393H298.387L295.879 33.077C295.26 34.5085 294.955 35.5847 294.955 36.2953C294.955 36.8639 295.219 37.3512 295.757 37.7776C296.295 38.204 297.452 38.4781 299.229 38.6101V39.6152H287.584V38.6101C289.127 38.336 290.133 37.9807 290.579 37.5441C291.503 36.671 292.529 34.9044 293.655 32.2242L306.661 1.797H307.615L320.489 32.5491C321.524 35.0263 322.468 36.6304 323.311 37.3614C324.154 38.1025 325.331 38.5086 326.844 38.6V39.6051H312.255V38.6C313.727 38.5289 314.722 38.2852 315.24 37.8588C315.758 37.4426 316.011 36.935 316.011 36.336C316.011 35.5339 315.646 34.275 314.925 32.5491L312.691 27.2291L312.702 27.2393ZM311.94 25.2189L305.666 10.2744L299.229 25.2189H311.94Z" fill={logoFillColor} />
            <path d="M182.983 38.9655C181.907 38.6203 181.094 38.2446 180.546 37.8487C179.988 37.4527 179.176 36.6202 178.11 35.3715L175.714 32.4272L172.688 28.7216V28.7013L151.429 2.63966H141.398V3.64477C142.474 3.64477 143.266 3.72599 143.794 3.88843C144.87 4.23361 145.682 4.60926 146.231 5.00521C146.789 5.40116 147.601 6.23366 148.667 7.48243V33.1887C148.667 35.2598 148.464 36.5898 148.068 37.1685C147.418 38.1127 146.291 38.5898 144.718 38.5898H143.439V39.5949H156.312V38.5898H155.002C153.571 38.5898 152.505 38.204 151.814 37.4426C151.327 36.8842 151.083 35.4628 151.083 33.1887V10.447L175.348 40.2244H185.379V39.2193C184.303 39.2193 183.511 39.1381 182.983 38.9756V38.9655Z" fill={logoFillColor} />
            <path d="M204.069 20.0919H191.115V21.5336H204.069V20.0919Z" fill={logoFillColor} />
            <path d="M174.952 12.7414C177.733 12.7414 179.988 10.4869 179.988 7.70577C179.988 4.92466 177.733 2.67011 174.952 2.67011C172.171 2.67011 169.916 4.92466 169.916 7.70577C169.916 10.4869 172.171 12.7414 174.952 12.7414Z" fill="#C32337" />
            <path d="M401.739 0C402.501 0 403.151 0.263966 403.689 0.802051C404.227 1.34014 404.491 1.9899 404.491 2.75134C404.491 3.51278 404.227 4.1727 403.689 4.71078C403.151 5.25902 402.501 5.53314 401.739 5.53314C400.978 5.53314 400.318 5.25902 399.78 4.71078C399.242 4.16254 398.958 3.51278 398.958 2.75134C398.958 1.9899 399.221 1.34014 399.76 0.802051C400.298 0.263966 400.958 0 401.739 0Z" fill="#C32337" />
          </svg>
          <span className={styles.logoText}>サンプラとプラスチック成形の今を伝えるメディア</span>
        </Link>
        <button
          type='button'
          className={classnames(styles.menuButton, isMenuOpen ? styles.isOpen : '')}
          onClick={handleMenuButtonClick}
        >
          <span className={styles.bar}></span>
          <span className={styles.bar}></span>
          <span className={styles.bar}></span>
        </button>
        <ul className={styles.lists}>
          <li className={styles.listsItem}>
            <Link
              href={'https://www.f-sanyo-plastic.jp/'}
              scroll={false}
              className={styles.link}
              target='_blank'
            >
              <i className={styles.icon}>
                <Image src={'/images/home.svg'} alt={'HOMEのアイコン'} width={22} height={21} />
              </i>
            </Link>
          </li>
          <li className={styles.listsItem}>
            <Link
              href={`https://www.f-sanyo-plastic.jp/#section-28`}
              scroll={false}
              className={styles.link}
              target='_blank'
            >
              <i className={styles.icon}>
                <Image src={'/images/mail.svg'} alt={'CONTACTのアイコン'} width={25} height={18} />
              </i>
            </Link>
          </li>
        </ul>
        <ul className={classnames(styles.hamburgerMenu, isMenuOpen ? styles.isOpen : '')}>
          {categories && tags && (
            <li>
              <ul className={styles.navigationList}>
                <li className={styles.navigationItem}>
                  <button className={classnames(styles.button, activeButton === 'category' ? styles.isActive : '')} onClick={handleClick} data-toggle='category' data-content='navs'>
                    <i className={styles.buttonIcon}>
                      <Image src={'/images/category.svg'} alt={'カテゴリアイコン'} width={18} height={13} />
                    </i>
                    <span className={styles.buttonText}>カテゴリ</span>
                  </button>
                </li>
                <li className={styles.navigationItem}>
                  <button className={classnames(styles.button, activeButton === 'tag' ? styles.isActive : '')} onClick={handleClick} data-toggle='tag' data-content='navs'>
                    <i className={styles.buttonIcon}>
                      <Image src={'/images/tag.svg'} alt={'タグアイコン'} width={18} height={18} />
                    </i>
                    <span className={styles.buttonText}>タグ一覧</span>
                  </button>
                </li>
              </ul>
              <ul className={styles.navigationContent}>
                <li className={classnames(styles.content, activeButton === 'category' ? styles.isActive : '')} data-toggle='category'>
                  <CategoryList contents={categories} />
                </li>
                <li className={classnames(styles.content, activeButton === 'tag' ? styles.isActive : '')} data-toggle='tag'>
                  <TagList contents={tags} justifyContent='j-flex-start' />
                </li>
              </ul>
            </li>
          )}
          <li>
            <ul className={styles.iconMenuList}>
              <li className={styles.iconMenu}>
                <Link
                  href={'https://www.f-sanyo-plastic.jp/'}
                  scroll={false}
                  className={styles.link}
                  target='_blank'
                >
                  <i className={styles.icon}>
                    <Image src={'/images/home.svg'} alt={'HOMEのアイコン'} width={22} height={21} />
                  </i>
                </Link>
              </li>
              <li className={styles.iconMenu}>
                <Link
                  href={`https://www.f-sanyo-plastic.jp/#section-28`}
                  scroll={false}
                  className={styles.link}
                  target='_blank'
                >
                  <i className={styles.icon}>
                    <Image src={'/images/mail.svg'} alt={'CONTACTのアイコン'} width={25} height={18} />
                  </i>
                </Link>
              </li>
            </ul>
          </li>
          <li className={styles.bannerMenu}>
            <Link
              href={`https://www.f-sanyo-plastic.jp/`}
              scroll={false}
              className={styles.banner}
              target='_blank'
            >
              <Image src={'/images/banner-official.webp'} alt={'公式バナー'} width={300} height={141} />
            </Link>
          </li>
          <li className={styles.bannerMenu}>
            <Link
              href={`https://bekopla.mirai-work.org/`}
              scroll={false}
              className={styles.banner}
              target='_blank'
            >
              <Image src={'/images/banner-online-shop.webp'} alt={'公式オンラインショップバナー'} width={300} height={171} />
            </Link>
          </li>
        </ul>
      </header>
      <div
        className={classnames(styles.overlay, isMenuOpen ? styles.isOpen : '')}
        onClick={handleOverlayClick}
      />
    </>
  );
}

export default React.memo(Header);